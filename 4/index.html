<!DOCTYPE html>
<html lang="en">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="hahaha">
  <meta name="keywords" content="">
  <title>Array push, unshift, pop, shift method implementation. - hahaha&#39;s blog</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/github-gist.min.css" />
  

  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_yg9cfy8wd6.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_pjno9b9zyxs.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script  src="/js/utils.js" ></script>
<meta name="generator" content="Hexo 4.2.1"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>HaHaHa's Blog</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background" parallax=true
         style="background: url('/img/header.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
                Array push, unshift, pop, shift method implementation.
              
            </span>

            
              
  <div class="mt-3 post-meta">
    <i class="iconfont icon-date-fill" aria-hidden="true"></i>
    <time datetime="2020-06-28 09:21">
      June 28, 2020 am
    </time>
  </div>


<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      898 words
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      17
       min
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <div class="post-content mx-auto" id="post">
            
            <article class="markdown-body">
              <h3 id="Push-at-the-end-push"><a href="#Push-at-the-end-push" class="headerlink" title="Push at the end (push)"></a>Push at the end (push)</h3><p>It can be seen from the explanation that the push method only needs to put the elements to be added to the end of the array in sequence, and will not change the index of the original array elements. So loop through the parameter list and place the new elements in order at the end of the array.</p>
<pre><code class="hljs js"><span class="hljs-built_in">Array</span>.prototype._push = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">...value</span>) </span>&#123; <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">arguments</span>.length; i++) &#123;  
 <span class="hljs-keyword">this</span>[<span class="hljs-keyword">this</span>.length] = <span class="hljs-built_in">arguments</span>[i]  
 &#125; <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.length  
&#125;  
<span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]arr._push(<span class="hljs-number">9</span>, <span class="hljs-number">8</span>)  
<span class="hljs-built_in">console</span>.log(arr) <span class="hljs-comment">// [ 1, 2, 3, 4, 9, 8 ]</span></code></pre>

<h3 id="Header-addition-unshift"><a href="#Header-addition-unshift" class="headerlink" title="Header addition (unshift)"></a>Header addition (unshift)</h3><p>Add elements to the head of the array, the length of the array will also change, but unlike the operation at the end, the original element index of the array does not change. To add the head, you need to move the index of the original element to the right.<br>For example, to add only one bit, you need to shift the index of each element of the array to the right one by one, assuming that the original array length is 4, add an element to the head, and the length becomes 5.</p>
<p>So now it becomes: <code>array.length=5</code>, and currently <code>array[5-1]</code> is the last element, now because it moves backwards in sequence, so <code>array[5]</code> must be the last element<br>so we can Loop forward from the next bit of the last bit of the array , assign <code>array[i]</code> to <code>array[i-1]</code> , loop to 1 to stop, and assign the 0th item of array to the value that needs to be added.</p>
<p>The process is as follows:</p>
<p><img src="1.jpg" srcset="/img/loading.gif" alt=""></p>
<p>Specific code implementation:</p>
<pre><code class="hljs js"><span class="hljs-built_in">Array</span>.prototype._unshift = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>&#123; <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-keyword">this</span>.length; i &gt; <span class="hljs-number">0</span>; i--) &#123;  
 <span class="hljs-keyword">this</span>[i] = <span class="hljs-keyword">this</span>[i - <span class="hljs-number">1</span>] &#125; <span class="hljs-keyword">this</span>[<span class="hljs-number">0</span>] = value <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.length 
&#125;  
<span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]arr._unshift(<span class="hljs-number">8</span>)  
  
<span class="hljs-built_in">console</span>.log(arr); <span class="hljs-comment">// [ 8, 1, 2, 3, 4 ]</span></code></pre>

<p>However, the above code only implements the addition of an element header, and the unshift method supports adding multiple elements. E.g:</p>
<pre><code class="hljs js"><span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]arr.unshift(<span class="hljs-number">8</span>, <span class="hljs-number">7</span>)  
<span class="hljs-built_in">console</span>.log(arr); <span class="hljs-comment">// [ 8, 7, 1, 2, 3, 4 ]</span></code></pre>

<p>For such a situation, you need to know that several parameters are passed in. You can start with the arguments object. The idea is still the above idea.</p>
<p>The length of the new array is equal to the length of the original array + the number of parameters, looping from back to front, moving the last bit of the original array to the last bit of the new array,<br>because the number of input parameters is required to be inserted in the head Element, so the starting point of the loop is the length of the original array + the number of parameters, and the end point of the loop is the number of input parameters.<br>But since the index is always one bit less than the length, the start and end points need to be decremented by 1.</p>
<p>Now you can write the logic of circular movement first.</p>
<pre><code class="hljs js"><span class="hljs-built_in">Array</span>.prototype._unshift = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">...value</span>) </span>&#123; <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = (<span class="hljs-keyword">this</span>.length + <span class="hljs-built_in">arguments</span>.length - <span class="hljs-number">1</span>); i &gt; <span class="hljs-built_in">arguments</span>.length - <span class="hljs-number">1</span>; i--) &#123; <span class="hljs-keyword">this</span>[i] = <span class="hljs-keyword">this</span>[i - <span class="hljs-built_in">arguments</span>.length]  
 &#125;&#125;</code></pre>

<p>Think again, because the previous step has been moved, the position of the array head has been vacated, the second step is to insert a few elements with several parameters. So now you only need to insert in a loop:</p>
<pre><code class="hljs js"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-built_in">arguments</span>.length; k++) &#123;  
<span class="hljs-keyword">this</span>[k] = <span class="hljs-built_in">arguments</span>[k]  
&#125;</code></pre>

<p>The complete code is as follows:</p>
<pre><code class="hljs js"><span class="hljs-built_in">Array</span>.prototype._unshift = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">...value</span>) </span>&#123; <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = (<span class="hljs-keyword">this</span>.length + <span class="hljs-built_in">arguments</span>.length - <span class="hljs-number">1</span>); i &gt; <span class="hljs-built_in">arguments</span>.length - <span class="hljs-number">1</span>; i--) &#123; <span class="hljs-keyword">this</span>[i] = <span class="hljs-keyword">this</span>\[i - <span class="hljs-built_in">arguments</span>.length]  
 &#125; <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-built_in">arguments</span>.length; k++) &#123;  
 <span class="hljs-keyword">this</span>[k] = <span class="hljs-built_in">arguments</span>[k] &#125; <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.length  
&#125;  
<span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>\]arr._unshift(<span class="hljs-number">9</span>, <span class="hljs-number">8</span>)  
<span class="hljs-built_in">console</span>.log(arr); <span class="hljs-comment">// [ 9, 8, 1, 2, 3, 4 ]</span></code></pre>

<h3 id="Tail-deletion-pop"><a href="#Tail-deletion-pop" class="headerlink" title="Tail deletion (pop)"></a>Tail deletion (pop)</h3><p>This is very easy to achieve, you can do it step by step according to the definition. First, record the last element to facilitate the return, then delete the last element from the array,</p>
<p>point it to null and release, then reduce the length of the array by 1, and finally judge whether it is an empty array.</p>
<pre><code class="hljs js"><span class="hljs-built_in">Array</span>.prototype._pop = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123; <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.length) &#123;  
 <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>  
 &#125; <span class="hljs-keyword">var</span> end = <span class="hljs-keyword">this</span>[<span class="hljs-keyword">this</span>.length - <span class="hljs-number">1</span>] <span class="hljs-keyword">this</span>[<span class="hljs-keyword">this</span>.length - <span class="hljs-number">1</span>] = <span class="hljs-literal">null</span> <span class="hljs-keyword">this</span>.length = <span class="hljs-keyword">this</span>.length - <span class="hljs-number">1</span> <span class="hljs-keyword">return</span> end&#125;  
  
<span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]arr._pop()  
<span class="hljs-built_in">console</span>.log(arr); <span class="hljs-comment">// [ 1, 2, 3 ]</span></code></pre>

<h3 id="Head-shift-shift"><a href="#Head-shift-shift" class="headerlink" title="Head shift (shift)"></a>Head shift (shift)</h3><p>Header deletion will change the index of the original array element, that is, move the index of the element that has not been deleted to the left. First, record the deleted element for easy return, and then point the first element of the array to null , And<br>finally loop through the array and move the index.</p>
<pre><code class="hljs js"><span class="hljs-built_in">Array</span>.prototype._shift = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123; <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.length) &#123;  
 <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>  
 &#125; <span class="hljs-keyword">var</span> start = <span class="hljs-keyword">this</span>[<span class="hljs-number">0</span>] <span class="hljs-keyword">this</span>[<span class="hljs-number">0</span>] = <span class="hljs-literal">null</span> <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.length - <span class="hljs-number">1</span>; i++) &#123; <span class="hljs-keyword">this</span>[i] = <span class="hljs-keyword">this</span>[i + <span class="hljs-number">1</span>] &#125; <span class="hljs-keyword">this</span>.length = <span class="hljs-keyword">this</span>.length - <span class="hljs-number">1</span> <span class="hljs-keyword">return</span> start&#125;  
  
<span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]arr._shift()  
<span class="hljs-built_in">console</span>.log(arr); <span class="hljs-comment">// [ 2, 3, 4 ]</span></code></pre>


            </article>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Tech-Talk/">Tech Talk</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/js/">js</a>
                    
                      <a class="hover-with-bg" href="/tags/JavaScript/">JavaScript</a>
                    
                  </div>
                
              </div>
              
              
                <div class="post-prevnext row">
                  <div class="post-prev col-6">
                    
                    
                  </div>
                  <div class="post-next col-6">
                    
                    
                      <a href="/2/">
                        <span class="hidden-mobile">vscode remote SSH + frp</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </div>
                </div>
              
            </div>

            
          </div>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a>
    </div>
    
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


    

    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/main.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: 'article.markdown-body',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 0,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>





  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>

















  
    <!-- Baidu Analytics -->
    <script defer>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?6cea43985b91333ce7782f7ac7bfcf12";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  
    <!-- Google Analytics -->
    <script defer>
      (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
          m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
      })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

      ga('create', 'UA-170203436-1', 'auto');
      ga('send', 'pageview');
    </script>
  

  

  

  

  





</body>
</html>
